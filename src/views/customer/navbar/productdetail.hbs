<link href="/customer/css/product_page.css" rel="stylesheet">
  <script src="/customer/js/main.js" defer></script>

<script src="/customer/js/common_scripts.min.js"  ></script>
<script src="/customer/js/carousel_with_thumbs.js" ></script>
<style>
    .review {
        border: 1px solid #ddd;
        /* Border color */
        border-radius: 15px;
        /* Border radius for rounded corners */
        padding: 5px;
        /* Padding for inner content */
        margin-left: 10px;
        /* Spacing between reviews */
        margin-top: 10px;
        /* Spacing between reviews */
        margin-bottom: 5px;
        /* Spacing between reviews */


        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        /* Box shadow for a subtle effect */

        background-color: #f9f9f9;
        /* Background color */
    }
</style>
<div>
    <div id="page">
        <main>
            <div class="container margin_30">

                <div class="row">
                    <div class="col-md-6">
                        <div class="all">
                            <div class="slider">
                                <div class="owl-carousel owl-theme main">
                                    {{#each product.img}}
                                    <div style="background-image: url({{this}});" class="item-box">
                                        {{!-- <img style="background-image: url({{this}});" src={{thi}}
                                            class="item-box" /> --}}
                                    </div>
                                    {{/each}}
                                </div>
                                <div class="left nonl"><i class="ti-angle-left"></i></div>
                                <div class="right"><i class="ti-angle-right"></i></div>
                            </div>
                            <div class="slider-two">
                                <div class="owl-carousel owl-theme thumbs">
                                    {{#each product.img}}
                                    <div style="background-image: url({{this}});"
                                        class="item {{#if @first}}active{{/if}}">
                                    </div>
                                    {{/each}}
                                </div>
                                <div class="left-t nonl-t"></div>
                                <div class="right-t"></div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="breadcrumbs">
                            <ul>
                                <li><a href="#">Home</a></li>
                                <li><a href="#">Category</a></li>
                                <li>Page active</li>
                            </ul>
                        </div>
                        <!-- /page_header -->
                        <div class="prod_info">
                            <h1>{{product.name}}</h1>
                            <span class="rating"><i class="icon-star voted"></i><i class="icon-star voted"></i><i
                                    class="icon-star voted"></i><i class="icon-star voted"></i><i
                                    class="icon-star"></i><em>4 reviews</em></span>

                            <form class="prod_options">
                                <div class="row">
                                    <label class="col-xl-5 col-lg-5  col-md-6 col-6 pt-0"><strong>Color</strong></label>

                                </div>
                                <div class="row">
                                    <label class="col-xl-5 col-lg-5 col-md-6 col-6"><strong>Size</strong> - Size Guide
                                        <a href="#0" data-bs-toggle="modal" data-bs-target="#size-modal"><i
                                                class="ti-help-alt"></i></a></label>
                                    <div class="col-xl-4 col-lg-5 col-md-6 col-6">
                                        <div class="custom-select-form">
                                            <select class="wide" name="size">
                                                {{#each product.size}}
                                                <option value="{{this}}">{{this}}</option>
                                                {{/each}}
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <label class="col-xl-5 col-lg-5  col-md-6 col-6"><strong>Quantity</strong></label>
                                    <div class="col-xl-4 col-lg-5 col-md-6 col-6">
                                        <div class="numbers-row">
                                            <input type="text" value="1" id="quantity" class="qty2" name="quantity">
                                        </div>
                                    </div>
                                </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-5 col-md-6">
                                <div class="price_main"><span class="new_price">${{calcDiscount
                                        product.price}}</span><span class="percentage">-20%</span> <span
                                        class="old_price">${{product.price}}</span></div>
                            </div>
                            <div class="col-lg-4 col-md-6">

                                <div class="btn_add_to_cart">
                                    {{!-- <button href="#0" type="submit" class="btn_1">Add to Cart</button> --}}
                                    <button onclick="addtoCart('{{product._id}}')" class="btn_1">Add to Cart</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    </form>
                    <!-- /prod_info -->
                    <div class="product_actions">
                        <ul>
                            <li>
                                <a href="#"><i class="ti-heart"></i><span>Add to Wishlist</span></a>
                            </li>
                            <li>
                                <a href="#"><i class="ti-control-shuffle"></i><span>Add to Compare</span></a>
                            </li>
                        </ul>
                    </div>
                    <!-- /product_actions -->
                </div>
            </div>
            <!-- /row -->
    </div>
    <!-- /container -->

    <div class="tabs_product">
        <div class="container">
            <ul class="nav nav-tabs" role="tablist">
                <li class="nav-item">
                    <a id="tab-A" href="#pane-A" class="nav-link active" data-bs-toggle="tab" role="tab">Description</a>
                </li>
                <li class="nav-item">
                    <a id="tab-B" href="#pane-B" class="nav-link" data-bs-toggle="tab" role="tab">Reviews</a>
                </li>
            </ul>
        </div>
    </div>
    <!-- /tabs_product -->
    <div class="tab_content_wrapper">
        <div class="container">
            <div class="tab-content" role="tablist">
                <div id="pane-A" class="card tab-pane fade active show" role="tabpanel" aria-labelledby="tab-A">
                    <div class="card-header" role="tab" id="heading-A">
                        <h5 class="mb-0">
                            <a class="collapsed" data-bs-toggle="collapse" href="#collapse-A" aria-expanded="false"
                                aria-controls="collapse-A">
                                Description
                            </a>
                        </h5>
                    </div>
                    <div id="collapse-A" class="collapse" role="tabpanel" aria-labelledby="heading-A">
                        <div class="card-body">
                            <div class="row justify-content-between">
                                <div class="col-lg-6">
                                    <h3>Details</h3>
                                    <p>Lorem ipsum dolor sit amet, in eleifend <strong>inimicus
                                            elaboraret</strong> his, harum efficiendi mel ne. Sale percipit
                                        vituperata ex mel, sea ne essent aeterno sanctus, nam ea laoreet civibus
                                        electram. Ea vis eius explicari. Quot iuvaret ad has.</p>
                                    <p>Vis ei ipsum conclusionemque. Te enim suscipit recusabo mea, ne vis mazim
                                        aliquando, everti insolens at sit. Cu vel modo unum quaestio, in vide
                                        dicta has. Ut his laudem explicari adversarium, nisl <strong>laboramus
                                            hendrerit</strong> te his, alia lobortis vis ea.</p>
                                    <p>Perfecto eleifend sea no, cu audire voluptatibus eam. An alii praesent
                                        sit, nobis numquam principes ea eos, cu autem constituto suscipiantur
                                        eam. Ex graeci elaboraret pro. Mei te omnis tantas, nobis viderer
                                        vivendo ex has.</p>
                                </div>
                                <div class="col-lg-5">
                                    <h3>Specifications</h3>
                                    <div class="table-responsive">
                                        <table class="table table-sm table-striped">
                                            <tbody>
                                                <tr>
                                                    <td><strong>Color</strong></td>
                                                    <td>{{product.color}}</td>
                                                </tr>
                                                <tr>
                                                    <td><strong>Size</strong></td>
                                                    <td>{{product.size}}</td>
                                                </tr>
                                                <tr>
                                                    <td><strong>Category</strong></td>
                                                    <td>{{product.category}}</td>
                                                </tr>
                                                <tr>
                                                    <td><strong>Manufacturer</strong></td>
                                                    <td>{{product.manufacturer}}</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    <!-- /table-responsive -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- /TAB A -->
                <div id="pane-B" class="card tab-pane fade" role="tabpanel" aria-labelledby="tab-B">
                    <div class="card-header" role="tab" id="heading-B">
                        <h5 class="mb-0">
                            <a class="collapsed" data-bs-toggle="collapse" href="#collapse-B" aria-expanded="false"
                                aria-controls="collapse-B">
                                Reviews
                            </a>
                        </h5>
                    </div>
                    <div id="collapse-B" class="" role="tabpanel" aria-labelledby="heading-B">
                        <!-- /row -->
                        {{#each product.reviews}}
                        <div class="review">
                            <p><strong>{{this.name}}</strong></br> {{this.review}}</p>
                        </div>
                        {{/each}}
                        <!-- /row -->
                        <p class="text-end"><a href=/review/{{product._id}} class="btn_1">Leave a review</a>
                        </p>
                    </div>
                    <!-- /card-body -->
                </div>
            </div>
            <!-- /tab B -->

            <!-- /tab-content -->
        </div>
        <!-- /container -->
    </div>
    <!-- /tab_content_wrapper -->

    <div class="container margin_60_35">
        <div class="main_title">
            <h2>Related</h2>
            <span>Products</span>
            <p>People also see</p>
        </div>
        <div class="owl-carousel owl-theme products_carousel">
            {{#each relatedProducts}}
            <div class="item">
                <div class="grid_item">
                    <span class="ribbon new">New</span>
                    <figure>
                        <a href={{idtoString this._id}}>
                            <img class="" src="{{this.img.[0]}}" data-src="{{this.img.[0]}}" alt="">
                        </a>
                    </figure>
                    <div class="rating"><i class="icon-star voted"></i><i class="icon-star voted"></i><i
                            class="icon-star voted"></i><i class="icon-star voted"></i><i class="icon-star"></i>
                    </div>
                    <a href="/products/{{this._id}}">
                        <h3>{{this.name}}</h3>
                    </a>
                    <div class="price_box">
                        <span class="new_price">{{calcDiscount this.price}}</span>
                    </div>
                    <ul>
                        <li><a href="#0" class="tooltip-1" data-bs-toggle="tooltip" data-bs-placement="left"
                                title="Add to favorites"><i class="ti-heart"></i><span>Add to
                                    favorites</span></a></li>
                        <li><a href="#0" class="tooltip-1" data-bs-toggle="tooltip" data-bs-placement="left"
                                title="Add to compare"><i class="ti-control-shuffle"></i><span>Add to
                                    compare</span></a></li>
                        <li><a href="#0" class="tooltip-1" data-bs-toggle="tooltip" data-bs-placement="left"
                                title="Add to cart"><i class="ti-shopping-cart"></i><span>Add to cart</span></a>
                        </li>
                    </ul>
                </div>
                <!-- /grid_item -->
            </div>
            <!-- /item -->
            {{/each}}


        </div>
        <!-- /products_carousel -->
    </div>
    <!-- /container -->

    <div class="feat">
        <div class="container">
            <ul>
                <li>
                    <div class="box">
                        <i class="ti-gift"></i>
                        <div class="justify-content-center">
                            <h3>Free Shipping</h3>
                            <p>For all oders over $99</p>
                        </div>
                    </div>
                </li>
                <li>
                    <div class="box">
                        <i class="ti-wallet"></i>
                        <div class="justify-content-center">
                            <h3>Secure Payment</h3>
                            <p>100% secure payment</p>
                        </div>
                    </div>
                </li>
                <li>
                    <div class="box">
                        <i class="ti-headphone-alt"></i>
                        <div class="justify-content-center">
                            <h3>24/7 Support</h3>
                            <p>Online top support</p>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
    </div>
    <!--/feat-->

    </main>
    <!-- /main -->
</div>
<!-- page -->

<div id="toTop"></div><!-- Back to top button -->

<div class="top_panel">
    <div class="container header_panel">
        <a href="#0" class="btn_close_top_panel"><i class="ti-close"></i></a>
        <label>1 product added to cart</label>
    </div>
    <!-- /header_panel -->
    <div class="item">
        <div class="container">
            <div class="row">
                <div class="col-md-7">
                    <div class="item_panel">
                        <figure>
                            </customer /img src="/customer/img/products/product_placeholder_square_small.jpg"
                                data-src="/customer/img/products/shoes/1.jpg" class="lazy" alt="">
                        </figure>
                        <h4>1x Armor Air X Fear</h4>
                        <div class="price_panel"><span class="new_price">$148.00</span><span
                                class="percentage">-20%</span> <span class="old_price">$160.00</span></div>
                    </div>
                </div>
                <div class="col-md-5 btn_panel">
                    <a href=/cart class="btn_1 outline">View cart</a>
                </div>
            </div>
        </div>
    </div>
    <!-- /item -->
    <div class="container related">
        <h4>Who bought this product also bought</h4>
        <div class="row">
            <div class="col-md-4">
                <div class="item_panel">
                    <a href="#0">
                        <figure>
                            </customer /img src="/customer/img/products/product_placeholder_square_small.jpg"
                                data-src="/customer/img/products/shoes/2.jpg" alt="" class="lazy">
                        </figure>
                    </a>
                    <a href="#0">
                        <h5>Armor Okwahn II</h5>
                    </a>
                    <div class="price_panel"><span class="new_price">$90.00</span></div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="item_panel">
                    <a href="#0">
                        <figure>
                            </customer /img src="/customer/img/products/product_placeholder_square_small.jpg"
                                data-src="/customer/img/products/shoes/3.jpg" alt="" class="lazy">
                        </figure>
                    </a>
                    <a href="#0">
                        <h5>Armor Air Wildwood ACG</h5>
                    </a>
                    <div class="price_panel"><span class="new_price">$75.00</span><span class="percentage">-20%</span>
                        <span class="old_price">$155.00</span>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="item_panel">
                    <a href="#0">
                        <figure>
                            </customer /img src="/customer/img/products/product_placeholder_square_small.jpg"
                                data-src="/customer/img/products/shoes/4.jpg" alt="" class="lazy">
                        </figure>
                    </a>
                    <a href="#0">
                        <h5>Armor ACG React Terra</h5>
                    </a>
                    <div class="price_panel"><span class="new_price">$110.00</span></div>
                </div>
            </div>
        </div>
    </div>
    <!-- /related -->
</div>
<!-- /add_cart_panel -->

<!-- Size modal -->
<div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="size-modal" id="size-modal" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Size guide</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>Lorem ipsum dolor sit amet, et velit propriae invenire mea, ad nam alia intellegat. Aperiam
                    mediocrem rationibus nec te. Tation persecuti accommodare pro te. Vis et augue legere, vel
                    labitur habemus ocurreret ex.</p>
                <div class="table-responsive">
                    <table class="table table-striped table-sm sizes">
                        <tbody>
                            <tr>
                                <th scope="row">US Sizes</th>
                                <td>6</td>
                                <td>6,5</td>
                                <td>7</td>
                                <td>7,5</td>
                                <td>8</td>
                                <td>8,5</td>
                                <td>9</td>
                                <td>9,5</td>
                                <td>10</td>
                                <td>10,5</td>
                            </tr>
                            <tr>
                                <th scope="row">Euro Sizes</th>
                                <td>39</td>
                                <td>39</td>
                                <td>40</td>
                                <td>40-41</td>
                                <td>41</td>
                                <td>41-42</td>
                                <td>42</td>
                                <td>42-43</td>
                                <td>43</td>
                                <td>43-44</td>
                            </tr>
                            <tr>
                                <th scope="row">UK Sizes</th>
                                <td>5,5</td>
                                <td>6</td>
                                <td>6,5</td>
                                <td>7</td>
                                <td>7,5</td>
                                <td>8</td>
                                <td>8,5</td>
                                <td>9</td>
                                <td>9,5</td>
                                <td>10</td>
                            </tr>
                            <tr>
                                <th scope="row">Inches</th>
                                <td>9.25"</td>
                                <td>9.5"</td>
                                <td>9.625"</td>
                                <td>9.75"</td>
                                <td>9.9375"</td>
                                <td>10.125"</td>
                                <td>10.25"</td>
                                <td>10.5"</td>
                                <td>10.625"</td>
                                <td>10.75"</td>
                            </tr>
                            <tr>
                                <th scope="row">CM</th>
                                <td>23,5</td>
                                <td>24,1</td>
                                <td>24,4</td>
                                <td>24,8</td>
                                <td>25,4</td>
                                <td>25,7</td>
                                <td>26</td>
                                <td>26,7</td>
                                <td>27</td>
                                <td>27,3</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <!-- /table -->
            </div>
        </div>
    </div>
</div>


<!-- COMMON SCRIPTS -->
{{!--
<script src="js/common_scripts.min.js"></script>
<script src="js/main.js"></script> --}}

<!-- SPECIFIC SCRIPTS -->



</div>






<script>
    function addtoCart(productId) {
        event.preventDefault();

        var quantity = $("#quantity").val();
        $.ajax({
            type: "POST",
            url: `/products/${productId}/addtocart`,
            data: { quantity: quantity },
            success: function (response) {
                if (response.message) {
                    alert("Congratulation", response.message);
                    window.location.reload(true);
                }
                else {
                    window.location.href = '/log-in';
                    return;
                }
                // Thực hiện các hành động sau khi thêm vào giỏ hàng thành công (nếu có)
            },
            error: function (error) {
                // Xử lý lỗi
                alert("Product's stock is not enough");
                // Thực hiện các hành động sau khi thêm vào giỏ hàng thất bại (nếu có)
            },
        });
    }

</script>